<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <cc:interface>        
        <cc:attribute name="frm2" required="true"/>
    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>        
        <p:panel id="pn_descarga_J">
            <script type="text/javascript">
                //<![CDATA[
                function start() {
                    PF('statusDialog').show();
                }

                function stop() {
                    PF('statusDialog').hide();
                }

                //]]>
            </script> 
            <h:panelGrid columns="1">                                     
                <p:commandLink id="idExpBtnRGlobal" action="#{consultarReporteControlador.obtenerReporteJasper()}"
                               onclick="PrimeFaces.monitorDownload(start, stop);"                                                   
                               update="#{cc.attrs.frm2}"
                               ajax="false"
                               >    
                    <p:graphicImage id="idImgExcelRGlobal" value="#{baseControlador.getProfundidad()}imagenes/iconEXCEL.png" width="35" />  
                    <p:tooltip id="tipi1RGblobal" for="idImgExcelRGlobal" value="Excel" styleClass="estiloTextoCandaraMed"/>
                </p:commandLink> 
            </h:panelGrid>
            <h:outputScript rendered="#{consultarReporteControlador.showAlert1}">
                $.growl.warning({ message: "Debe seleccionar el casillero del reporte a descargar" });
            </h:outputScript>            
            <h:outputScript rendered="#{consultarReporteControlador.showAlert1}">
                $.growl.error({ message: "Error al seleccionar el reporte a descargar" });
            </h:outputScript>
        </p:panel>
    </cc:implementation>
</html>
