<html
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">
    <body>
       
        <ui:composition>
                
            <p:panel id="manage-no-censado-content" class="ui-fluid">
               <p:outputPanel rendered="#{not empty registroNoCensadoControlador.captDetalleH}">
                   <p:growl id="messages" showDetail="true"/>
                   <div class="card">
                       
                       <p:panelGrid id="idFormularioNoCensado"
                                    columns="6"
                                    columnClasses="ui-grid-col-2,ui-grid-col-6,ui-grid-col-2,ui-grid-col-6"
                                    layout="grid"
                                    styleClass="ui-panelgrid-blank ui-fluid"
                                    style="border:0px none; background-color:transparent;">

                           <p:row styleClass="my-heading-row">
                               <p:column styleClass="ui-grid-col-12">
                                   <p style="font-size: 18px">Registro de datos no censado</p>
                               </p:column>
                           </p:row>
                           <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                    <span>Lugar de Residencia</span>
                                    <p:divider/>
                                </p:column>
                           </p:row>
                           <p:row>
                               <p:column styleClass="ui-grid-col-4">
                                   <p:outputLabel for="@next" value="Provincia"/>
                                   <p:selectOneMenu
                                       id="dpaProvSelect"
                                       value="#{registroNoCensadoControlador.provinciaSelected}"
                                       filter="true"
                                       required="true"
                                       filterMatchMode="contains"
                                       converter="omnifaces.SelectItemsConverter"
                                       requiredMessage="Provincia necesita ser seleccionado">
                                       <f:selectItem
                                           itemLabel="Seleccione uno"
                                           itemValue=""
                                           noSelectionOption="true" />
                                       <f:selectItems
                                           value="#{registroNoCensadoControlador.listaDpaProvinciaSelect}"
                                           var="prov"
                                           itemLabel="#{prov.nombre}"
                                           itemValue="#{prov}" />
                                       <p:ajax
                                           event="valueChange"
                                           update="dpaCanSelect"
                                           process="@this"
                                           listener="#{registroNoCensadoControlador.onChangeProvincia}" />
                                   </p:selectOneMenu>
                               </p:column>
                               <p:column styleClass="ui-grid-col-4">
                                   <p:outputLabel for="@next" value="Cantón"/>
                                   <p:selectOneMenu
                                       id="dpaCanSelect"
                                       value="#{registroNoCensadoControlador.cantonSelected}"
                                       filter="true"
                                       required="true"
                                       filterMatchMode="contains"
                                       converter="omnifaces.SelectItemsConverter">
                                       <f:selectItem
                                           itemLabel="Seleccione uno"
                                           itemValue=""
                                           noSelectionOption="true" />
                                       <f:selectItems
                                           value="#{registroNoCensadoControlador.listaDpaCantonSelect}"
                                           var="can"
                                           itemLabel="#{can.nombre}"
                                           itemValue="#{can}" />
                                       <p:ajax
                                           event="valueChange"
                                           update="dpaCiuSelect"
                                           process="@this"
                                           listener="#{registroNoCensadoControlador.onChangeCanton}" />
                                   </p:selectOneMenu>
                               </p:column>
                               <p:column styleClass="ui-grid-col-4">
                                   <p:outputLabel for="@next" value="Ciudad o Parroquia"/>
                                   <p:selectOneMenu
                                       id="dpaCiuSelect"
                                       value="#{registroNoCensadoControlador.parroquiaSelected}"
                                       filter="true"
                                       required="true"
                                       filterMatchMode="contains"
                                       converter="omnifaces.SelectItemsConverter">
                                       <f:selectItem
                                           itemLabel="Seleccione uno"
                                           itemValue=""
                                           noSelectionOption="true" />
                                       <f:selectItems
                                           value="#{registroNoCensadoControlador.listaDpaCiudadSelect}"
                                           var="ciu"
                                           itemLabel="#{ciu.nombre}"
                                           itemValue="#{ciu}" />
                                       <p:ajax
                                           event="valueChange"
                                           update="dpaCiuSelect"
                                           process="@this"/>
                                   </p:selectOneMenu>
                               </p:column>
                            </p:row>
                            <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                    <span>Información del Ciudadano</span>
                                    <p:divider />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column styleClass="ui-grid-col-4">
                                     <p:outputLabel for="@next" value="Tipos de usuarios"/>
                                      <p:selectOneMenu
                                        id="idTipoUsuario"
                                        value="#{registroNoCensadoControlador.tipoUsuario}"
                                        filter="true"
                                        filterMatchMode="contains"
                                        converter="omnifaces.SelectItemsConverter">
                                        <f:selectItem
                                            itemLabel="Seleccione uno"
                                            itemValue="#{null}"
                                            noSelectionOption="true" />
                                        <f:selectItems
                                            value="#{registroNoCensadoControlador.listaTipoUsuario}"
                                            var="req"
                                            itemLabel="#{req.nombre}"
                                            itemValue="#{req}" />
                                        <p:ajax
                                            event="valueChange"
                                            update="idTipoUsuario"
                                            process="@this"/>
                                    </p:selectOneMenu>
                                </p:column>
                            </p:row>                       
                             <p:row>
                                     <p:column styleClass="ui-grid-col-3">
                                         <p:outputLabel for="@next" value="Tipo de identificación"/>
                                          <p:selectOneMenu
                                            id="idTipoIdentificacion"
                                            value="#{registroNoCensadoControlador.tipoIdentificacion}"
                                            filter="true"
                                            filterMatchMode="contains"
                                            converter="omnifaces.SelectItemsConverter">
                                            <f:selectItem
                                                itemLabel="Seleccione uno"
                                                itemValue="#{null}"
                                                noSelectionOption="true" />
                                            <f:selectItems
                                                value="#{registroNoCensadoControlador.listaTipoIdentificacion}"
                                                var="req"
                                                itemLabel="#{req.nombre}"
                                                itemValue="#{req}" />
                                            <p:ajax
                                                event="valueChange"
                                                update="idTipoIdentificacion idFormularioNoCensado"
                                                process="@this"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                    <p:column styleClass="ui-grid-col-3">
                                        <p:outputLabel for="@next" value="Cédula de Identidad" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_01' ? true : false}"/>
                                        <p:inputText id="idCedula" 
                                                     value="#{registroNoCensadoControlador.numeroDocumento}" 
                                                     maxlength="10" 
                                                     required="true"
                                                     requiredMessage="Identificación no puede estar vacío"
                                                     rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_01' ? true : false}">
                                                <p:keyFilter regEx="/[0-9 ]/i"/>
                                                <f:validator
                                                            binding="${cedulaValidador}"
                                                            for="cedula" />
                                                <p:ajax event="blur"
                                                        process="@this"
                                                        listener="#{registroNoCensadoControlador.consultaCiudadanoPorCedula(actionEvent)}"
                                                        update="@this, messageCedula nombre apellido"/>

                                                <p:ajax event="change"
                                                        process="@this"
                                                        update="@this, messageCedula nombre apellido"/>
                                                
                                        </p:inputText>
                                        <p:message id="messageCedula" for="idCedula" display="icon text" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_01' ? true : false}"/>
                                        
                                        <p:outputLabel for="@next" value="Ruc" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_02' ? true : false}"/>
                                        <p:inputText id="idRuc" 
                                                     value="#{registroNoCensadoControlador.numeroDocumento}" 
                                                     maxlength="13" 
                                                     required="true"
                                                     requiredMessage="Identificación no puede estar vacío"
                                                     rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_02' ? true : false}">
                                                <p:keyFilter regEx="/[0-9 ]/i"/>
                                                <f:validator
                                                            binding="${rucValidador}"
                                                            for="cedula" />
<!--                                                <p:ajax event="blur"
                                                        process="@this"
                                                        listener="#{registroNoCensadoControlador.consultaCiudadanoPorCedula(actionEvent)}"
                                                        update="@this, messageCedula nombre apellido"/>-->

                                                <p:ajax event="change"
                                                        process="@this"
                                                        update="@this, messageRuc"/>
                                                
                                        </p:inputText>
                                        <p:message id="messageRuc" for="idRuc" display="icon text" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_02' ? true : false}"/>
                                        
                                        <p:outputLabel for="@next" value="Numero de Pasaporte" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_04' ? true : false}"/>
                                        <p:inputText id="idPasaporte" 
                                                     value="#{registroNoCensadoControlador.numeroDocumento}" 
                                                     maxlength="20" 
                                                     required="true"
                                                     requiredMessage="Identificación no puede estar vacío"
                                                     rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_04' ? true : false}">
                                                <p:keyFilter regEx="/[A-Za-z0-9]+/g"/>
                                                <p:ajax event="change"
                                                        process="@this"
                                                        update="@this, messagePasaporte"/>
                                                
                                        </p:inputText>
                                        <p:message id="messagePasaporte" for="idPasaporte" display="icon text" rendered="#{registroNoCensadoControlador.tipoIdentificacion.alias eq 'SIAC_TPI_04' ? true : false}"/>
                                        
                                    </p:column>
                                
                                    <p:column styleClass="ui-grid-col-6">
                                        
                                    </p:column>
                                </p:row>
                           <p:row> 
                           <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Nombres"/>
                                   <p:inputText id="nombre" 
                                                value="#{registroNoCensadoControlador.nombre}"                                                     
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"                                                        
                                                maxlength="50"
                                                required="true" 
                                                requiredMessage="Nombre no puede estar vacío">
                                       <p:keyFilter regEx="/[A-Z ]/i"/>
                                   </p:inputText>
                                </p:column>
                               <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Apellidos"/>
                                   <p:inputText id="apellido" 
                                                value="#{registroNoCensadoControlador.apellido}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"                                                          
                                                maxlength="50" 
                                                required="true"
                                                requiredMessage="Apellido no puede estar vacío">
                                       <p:keyFilter regEx="/[A-Z ]/i"/>
                                   </p:inputText>
                               </p:column>
                           </p:row>
                           <p:row>
                               <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Correo electrónico"/>
                                   <p:inputText id="correo" 
                                                value="#{registroNoCensadoControlador.correo}" 
                                                requiredMessage="Correo no tine formato correcto"   
                                                autocomplete="off"  
                                                maxlength="225">
                                        <!--<f:validateRegex pattern="^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,6})$" />-->
                                         <f:validator validatorId="custom.emailValidator" />
					 <p:ajax />
                                   </p:inputText>
                               </p:column>
                               <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel value="Teléfono"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>  
                                   <p:inputText id="telefono" 
                                                value="#{registroNoCensadoControlador.telefono}"                                                         
                                                maxlength="10">
                                        <p:keyFilter regEx="/[0-9 ]/i"/>
                                   </p:inputText>
                               </p:column>
                                                                
                            </p:row>
                            <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                    <p:divider />
                                </p:column>
                            </p:row>
                            <p:row>
                               <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Barrio/Sector"/>
                                   <p:inputText id="barrioSector" 
                                                value="#{registroNoCensadoControlador.barrio}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"
                                                required="true"
                                                requiredMessage="Barrio/Sector no puede estar vacío"
                                                maxlength="250">
                                   </p:inputText>
                               </p:column>
                                <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Calle Principal"/>  
                                   <p:inputText id="callePrincipal" 
                                                value="#{registroNoCensadoControlador.callePrincipal}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();" 
                                                required="true"
                                                requiredMessage="Calle Principal no puede estar vacío"
                                                maxlength="250">
                                   </p:inputText>
                                </p:column>
                                
                           </p:row>
                           <p:row>
                                <p:column styleClass="ui-grid-col-6">
                                    <p:outputLabel value="Número de Casa"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>  
                                       <p:inputText id="numeroCasa" 
                                                    value="#{registroNoCensadoControlador.numeroCasa}"
                                                    style="text-transform:uppercase;" 
                                                    onkeyup="javascript:this.value=this.value.toUpperCase();"                                                          
                                                    maxlength="50">
                                       </p:inputText>
                               </p:column>
                               <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="@next" value="Calle Secundaria"/>  
                                   <p:inputText id="calleSecundaria" 
                                                value="#{registroNoCensadoControlador.calleSecundaria}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();" 
                                                required="true"
                                                requiredMessage="Calle Secundaria no puede estar vacío"
                                                maxlength="250">
                                   </p:inputText>
                               </p:column>
                           </p:row>
                           <p:row>
                                <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel value="Nombre de Manzana, Bloque, Edificio"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>  
                                   <p:inputText id="nombreManzana" 
                                                value="#{registroNoCensadoControlador.nombreManBloEdi}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"                                                          
                                                maxlength="50">
                                   </p:inputText>
                               </p:column>
                                <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel value="Número de Piso"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>
                                   <p:inputText id="numPiso" 
                                                value="#{registroNoCensadoControlador.numeroPiso}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"                                                          
                                                maxlength="50">
                                   </p:inputText>
                               </p:column>
                           </p:row>
                           <p:row>
                               <p:column styleClass="ui-grid-col-4">
                                   <p:outputLabel value="Número Departamento"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>  
                                   <p:inputText id="numDepartamento" 
                                                value="#{registroNoCensadoControlador.numeroDepartamento}"
                                                style="text-transform:uppercase;" 
                                                onkeyup="javascript:this.value=this.value.toUpperCase();"                                                          
                                                maxlength="50">
                                   </p:inputText>
                               </p:column>
                           </p:row>
<!--                           <p:row>
                               <p:column styleClass="ui-grid-col-12">
                                   <p:outputLabel for="@next" value="Escuela/Colegio/Universidad más cercano"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>       
                                    <p:inputTextarea id="referencia" 
                                                     value="#{registroNoCensadoControlador.referencia}"  
                                                     style="text-transform:uppercase;" 
                                                     onkeyup="javascript:this.value=this.value.toUpperCase();"
                                                     counter="displayReferencia"
                                                     maxlength="1000"
                                                     counterTemplate="{0} caracteres restantes."/>
                                    <h:outputText id="displayReferencia" class="p-d-block" />
                                    
                                </p:column>
                               
                            </p:row>  -->
                            <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                    <p:outputLabel for="@next" value="Otro lugar de referencia"><p1 style="color:#B9B9B9;">-Opcional</p1></p:outputLabel>       
                                    <p:inputTextarea id="otraReferencia" 
                                                     value="#{registroNoCensadoControlador.otraReferencia}"  
                                                     style="text-transform:uppercase;" 
                                                     onkeyup="javascript:this.value=this.value.toUpperCase();"
                                                     counter="displayOtraReferencia"
                                                     maxlength="1000"
                                                     counterTemplate="{0} caracteres restantes."/>
                                    <h:outputText id="displayOtraReferencia" class="p-d-block" />
                                    
                                </p:column>
                            </p:row>
                           
                            <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                    <span>Información de la Incidencia</span>
                                    <p:divider />
                                </p:column>
                            </p:row>
                           <p:row>
                                 <p:column styleClass="ui-grid-col-6">
                                   <p:outputLabel for="idPlataforma" value="Plataforma" />
                                   <p:selectOneMenu
                                       id="idPlataforma"
                                       value="#{registroNoCensadoControlador.plataformaSelected}"
                                       filter="true"
                                       filterMatchMode="contains"
                                       converter="omnifaces.SelectItemsConverter">
                                       <f:selectItem
                                           itemLabel="Seleccione uno"
                                           itemValue="#{null}"
                                           noSelectionOption="true" />
                                       <f:selectItems
                                           value="#{registroNoCensadoControlador.listaPlatSelect}"
                                           var="req"
                                           itemLabel="#{req.nombre}"
                                           itemValue="#{req}" />
                                       <p:ajax
                                           event="valueChange"
                                           update="idPlataforma"
                                           process="@this"/>
                                   </p:selectOneMenu>
                               </p:column> 
                            </p:row>

                            <p:row>
                                <p:column styleClass="ui-grid-col-3">
                                    <p:outputLabel value="Número de personas de la vivienda no censada"  />  
                                    <p:inputText id="idNumPersonaNoCensada" 
                                                 value="#{registroNoCensadoControlador.numeroPersonaNoCensada}" 
                                                 maxlength="3">
                                         <p:keyFilter regEx="/[0-9 ]/i"/>
                                    </p:inputText>
                                </p:column>
                            </p:row>

                            <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                       <p:outputLabel for="@next" value="Detalle Requerimeinto"/>       
                                       <p:inputTextarea id="detalle" 
                                                        value="#{registroNoCensadoControlador.detalleInf}"  
                                                        style="text-transform:uppercase;" 
                                                        onkeyup="javascript:this.value=this.value.toUpperCase();"
                                                        required="true"
                                                        requiredMessage="Detalle no puede estar vacío"
                                                        counter="display"
                                                        maxlength="1000"
                                                        counterTemplate="{0} caracteres restantes."/>
                                       <h:outputText id="display" class="p-d-block" />
                                </p:column>
                           </p:row>
                           
                           <p:row>
                                <p:column styleClass="ui-grid-col-12">
                                       <p:outputLabel for="@next" value="Respuesta"/>       
                                       <p:inputTextarea id="respuesta" 
                                                        value="#{registroNoCensadoControlador.respuesta}"  
                                                        style="text-transform:uppercase;" 
                                                        onkeyup="javascript:this.value=this.value.toUpperCase();"
                                                        requiredMessage="Respuesta no puede estar vacío"
                                                        counter="displayRespuesta"
                                                        maxlength="1000"
                                                        counterTemplate="{0} caracteres restantes.">
                                                        <f:attribute name="idEstado" value="#{registroNoCensadoControlador.tipoEstadoActividadSelected}"/>
                                                        <f:validator binding="${respuestaValidador}" for="respuesta" />
                                       </p:inputTextarea>
                                       <h:outputText id="displayRespuesta" class="p-d-block" />
                                </p:column>
                           </p:row>
                            
                            <p:row>
                                <p:column styleClass="ui-grid-col-4">
                                   <p:outputLabel for="idEstado" value="Estado" />
                                   <p:selectOneMenu
                                       id="idEstado"
                                       value="#{registroNoCensadoControlador.tipoEstadoActividadSelected}"
                                       filter="true"
                                       required="true"
                                       filterMatchMode="contains"
                                       converter="omnifaces.SelectItemsConverter">
                                       <f:selectItems
                                           value="#{registroNoCensadoControlador.listaEstadoActividadSelect}"
                                           var="req"
                                           itemLabel="#{req.nombre}"
                                           itemValue="#{req}" />
                                       <p:ajax
                                           event="valueChange"
                                           update="idEstado"
                                           process="@this"/>
                                   </p:selectOneMenu>
                               </p:column>
                           </p:row>
                           <p:row>
                              <p:column styleClass="ui-grid-col-12">
                                  <p:divider />
                              </p:column>
                           </p:row>
                           <p:row>
                               <p:column styleClass="ui-grid-col-8"/>
                               <p:column styleClass="ui-grid-col-2">
                                   <p:commandButton 
                                       value="Guardar" 
                                       icon="pi pi-check" 
                                       actionListener="#{registroNoCensadoControlador.guardarNoCensado}"
                                       update="@(form:respuesta) manage-no-censado-content idEstado" 
                                       process="manage-no-censado-content @this"
                                       style="font-size: 2rem"
                                       styleClass="ui-button-success"/>
                               </p:column>
                               <p:column styleClass="ui-grid-col-2">
                                   <p:commandButton 
                                            value="Cancelar" 
                                            icon="pi pi-times" 
                                            actionListener="#{registroNoCensadoControlador.cancelar}"
                                            class="ui-button-secondary"
                                            process="@this" 
                                            update="@form"
                                            style="font-size: 2rem"/>
                               </p:column>
                           </p:row>
                           <p:row styleClass="my-heading-row">
                               <p:column styleClass="ui-grid-col-12">
                               </p:column>
                           </p:row>
                       </p:panelGrid>
                   
                   </div>

               </p:outputPanel>
            </p:panel>

        </ui:composition>
    </body>
</html>
